<script>
    // –¢–í–û–ò –ù–ê–°–¢–†–û–ô–ö–ò - –ó–ê–ü–û–õ–ù–ò –≠–¢–û!
    const TELEGRAM_BOT_TOKEN = '6543211234:AAHdG5sdfg34gdfgDFGdfg34gdfg_GDfgdfg'; // –¢–≤–æ–π API –∫–ª—é—á
    const TELEGRAM_CHANNEL_ID = '-1001234567890'; // ID —Ç–≤–æ–µ–≥–æ –∫–∞–Ω–∞–ª–∞
    const POSTS_LIMIT = 10; // –°–∫–æ–ª—å–∫–æ –ø–æ—Å—Ç–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å

    async function loadRealTelegramPosts() {
        const container = document.getElementById('postsContainer');
        
        try {
            container.innerHTML = `
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–≤–µ–∂–∏–µ –ø–æ—Å—Ç—ã –∏–∑ Telegram...
                </div>
            `;

            // –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å—Ç—ã –∏–∑ –∫–∞–Ω–∞–ª–∞
            const response = await fetch(
                `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/getChatHistory?chat_id=${TELEGRAM_CHANNEL_ID}&limit=${POSTS_LIMIT}`
            );
            
            const data = await response.json();
            
            if (!data.ok) {
                throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ—Å—Ç—ã');
            }

            container.innerHTML = '';

            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π –ø–æ—Å—Ç
            data.result.messages.forEach(message => {
                createPostElement(message, container);
            });

            if (data.result.messages.length === 0) {
                container.innerHTML = `
                    <div class="error">
                        <i class="fas fa-info-circle"></i>
                        <p>–í –∫–∞–Ω–∞–ª–µ –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤. –ë—É–¥—å –ø–µ—Ä–≤—ã–º!</p>
                    </div>
                `;
            }

        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤:', error);
            showError(container, error.message);
        }
    }

    function createPostElement(message, container) {
        const postElement = document.createElement('div');
        postElement.className = 'post';
        
        const postDate = new Date(message.date * 1000).toLocaleDateString('ru-RU');
        let postContent = '';
        let mediaHtml = '';

        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞
        if (message.text) {
            postContent = formatTelegramText(message.text);
        }

        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –º–µ–¥–∏–∞ (—Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ)
        if (message.photo) {
            const photo = message.photo[message.photo.length - 1]; // –ë–µ—Ä–µ–º —Å–∞–º—É—é –±–æ–ª—å—à—É—é –≤–µ—Ä—Å–∏—é
            mediaHtml = `<img src="https://api.telegram.org/file/bot${TELEGRAM_BOT_TOKEN}/${photo.file_path}" 
                             alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–∞" class="post-image" 
                             onerror="this.style.display='none'">`;
        }

        if (message.video) {
            mediaHtml = `
                <div class="post-video" style="background: #1DB954; height: 300px; border-radius: 10px; 
                     display: flex; align-items: center; justify-content: center; color: #000; font-weight: bold;">
                    üìπ –í–∏–¥–µ–æ –∫–æ–Ω—Ç–µ–Ω—Ç (–ø—Ä–æ—Å–º–æ—Ç—Ä –≤ Telegram)
                </div>
            `;
        }

        postElement.innerHTML = `
            <div class="post-header">
                <div class="channel-icon">
                    <i class="fas fa-gem"></i>
                </div>
                <div class="post-info">
                    <h3>–ë—é—Ä–æ –±–ª–µ—Å–∫–∞</h3>
                    <div class="post-date">${postDate}</div>
                </div>
            </div>
            <div class="post-content">
                ${postContent}
            </div>
            ${mediaHtml}
            <div class="post-actions">
                <span class="post-action">
                    <i class="far fa-eye"></i>
                    ${message.views || 0}
                </span>
                <a href="https://t.me/c/${TELEGRAM_CHANNEL_ID.toString().replace('-100', '')}/${message.id}" 
                   target="_blank" class="post-action">
                    <i class="fas fa-external-link-alt"></i>
                    –û—Ç–∫—Ä—ã—Ç—å –≤ Telegram
                </a>
            </div>
        `;
        
        container.appendChild(postElement);
    }

    function formatTelegramText(text) {
        // –ü—Ä–æ—Å—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Telegram
        return text
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // **–∂–∏—Ä–Ω—ã–π**
            .replace(/\_(.*?)\_/g, '<em>$1</em>') // _–∫—É—Ä—Å–∏–≤_
            .replace(/\n/g, '<br>'); // –ü–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫
    }

    function showError(container, message) {
        container.innerHTML = `
            <div class="error">
                <i class="fas fa-exclamation-triangle"></i>
                <p>${message || '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ—Å—Ç—ã'}</p>
                <p style="margin-top: 10px; font-size: 0.9rem; color: #B3B3B3;">
                    –ü–æ—Å–µ—Ç–∏—Ç–µ –Ω–∞—à Telegram –∫–∞–Ω–∞–ª –Ω–∞–ø—Ä—è–º—É—é:
                </p>
                <a href="https://t.me/+s-V3gpepZtw5ZWIy" target="_blank" class="telegram-link" style="margin-top: 15px;">
                    <i class="fab fa-telegram"></i>
                    –ü–µ—Ä–µ–π—Ç–∏ –≤ Telegram
                </a>
            </div>
        `;
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ—Å—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
        loadRealTelegramPosts();
    });

    // –ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
    setInterval(loadRealTelegramPosts, 600000);
</script>
